{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":"<p>Hello, documentation!</p>"},{"location":"aggregation/","title":"Aggregation","text":""},{"location":"aggregation/platforms/kubernetes/dns/","title":"DNS","text":"<p>CLARA can analyze the logs of CoreDNS (the default Kubernetes DNS server) to discover communication of components via DNS queries. For that feature to work correctly, it is crucial that the DNS server is configured to log DNS queries by enabling the <code>log</code> plugin.</p> An exampple ConfigMap for CoreDNS with the 'log' plugin enabled<pre><code>apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: coredns\n  namespace: kube-system\ndata:\n  Corefile: |\n    .:53 {\n        log\n        errors\n        health\n        ready\n        kubernetes cluster.local in-addr.arpa ip6.arpa {\n          pods insecure\n          fallthrough in-addr.arpa ip6.arpa\n        }\n        prometheus :9153\n        forward . /etc/resolv.conf\n        cache 30\n        loop\n        reload\n        loadbalance\n    }\n</code></pre>"},{"location":"aggregation/platforms/kubernetes/dns/#managed-kubernetes-cluster","title":"Managed Kubernetes cluster","text":"<p>Using a managed Kubernetes cluster from a service provider</p> <p>When using a managed cluster from a service provider, changes to core components of Kubernetes might be not allowed directly. Please consult the documentation of your respective provider.</p>"},{"location":"aggregation/platforms/kubernetes/dns/#digitalocean","title":"DigitalOcean","text":"<p>For DigitalOcean, the correct way of enabling logging is to create a special ConfigMap:</p> ConfigMap to activate query logging for CoreDNS in a Kubernetes cluster managed by DigitalOcean<pre><code>apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: coredns-custom\n  namespace: kube-system\ndata:\n  log.override: |\n    log\n</code></pre>"},{"location":"aggregation/platforms/kubernetes/dns/#dns-debugging","title":"DNS debugging","text":"<p>As described in the Kubernetes Documentation, you can use dnsutils to debug DNS resolution. For CLARA, this is also a simple way of creating DNS queries explicitly and checking if CLARA detects the communication. Just create a dnsutils-pod with the following manifest:</p> <pre><code>apiVersion: v1\nkind: Pod\nmetadata:\n  name: dnsutils\n  namespace: default\nspec:\n  containers:\n  - name: dnsutils\n    image: registry.k8s.io/e2e-test-images/jessie-dnsutils:1.7\n    command:\n      - sleep\n      - \"infinity\"\n    imagePullPolicy: IfNotPresent\n  restartPolicy: Always\n</code></pre> <p>Then you can use the following command to execute DNS queries:</p> <pre><code>kubectl exec -it dnsutils -n default -- nslookup google.com\n</code></pre> <p>Execute the following command to check the DNS server logs:</p> <pre><code>kubectl logs -l k8s-app=kube-dns -n kube-system\n</code></pre>"},{"location":"concept/","title":"Concept","text":""},{"location":"configuration/","title":"Configuration","text":""},{"location":"export/","title":"Export","text":""},{"location":"export/gropius/","title":"Gropius export","text":""},{"location":"export/svg/","title":"SVG export","text":""}]}